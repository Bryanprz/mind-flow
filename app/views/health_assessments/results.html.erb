<%#
    This sets the classes for the main layout container.
    It will grow, have a background color, and center its content.
  %>
<% content_for :main_container_class, 'w-full flex-1 flex justify-center items-stretch bg-base-200 p-8' %>


<%#
    This is our custom card.
    Because its parent (<main>) has 'items-stretch', this card will be
forced to the full height of the padded area.
    %>
<div class="w-1/2 flex flex-col p-6" data-controller="modal">
  <%# Card Content %>
  <h2 class="text-3xl font-black mb-4 tracking-wide">Your Assessment Results</h2>

  <div class="flex flex-col items-center gap-8 w-full">

    <div class="w-full md:w-3/4 bg-base-100 border border-1 border-gray-300 rounded-2xl flex flex-col p-6">
      <h3 class="text-2xl font-bold mb-2">Your Primary Dosha: <%= primary_dosha.name.titleize %></h3>
      <h4 class="text-xl font-semibold mb-2">About Prakruti</h4>
      <p class="text-lg mb-2">Your original nature, or Prakruti, is defined by your primary dosha. Understanding your Prakruti helps you align with your natural strengths and address potential imbalances.</p>
      <div class="text-lg">
        <%= t("doshas.#{primary_dosha.name.downcase}.description") %>
      </div>
      <div class="text-lg font-semibold">
        <ul class="list-disc list-inside space-y-1">
          <% t("doshas.#{primary_dosha.name.downcase}.bullet_points").each do |point| %>
            <li><%= point %></li>
          <% end %>
        </ul>
      </div>
      <div class="text-lg">
        <strong>Balanced:</strong> <%= t("doshas.#{primary_dosha.name.downcase}.in_balance") %>
      </div>
      <div class="text-lg">
        <strong>Unbalanced:</strong> <%= t("doshas.#{primary_dosha.name.downcase}.out_of_balance") %>
      </div>
    </div>

    <div class="w-full md:w-3/4 bg-base-100 border border-1 border-gray-300 rounded-2xl flex flex-col p-6">
      <h3 class="text-2xl font-bold mb-2">Your Chronic Conditions</h3>
      <% chronic_illnesses.each do |illness| %>
        <div class="mb-4">
          <h4 class="text-xl font-semibold mb-1"><%= illness.name %></h4>
          <p class="text-lg"><strong>Description:</strong> <%= illness.description %></p>
          <p class="text-lg"><strong>Ayurvedic Root Cause:</strong> <%= illness.root_cause %></p>
        </div>
      <% end %>
    </div>

    <div class="w-full md:w-3/4 bg-base-100 border border-1 border-gray-300 rounded-2xl flex flex-col p-6">
      <h3 class="text-2xl font-bold mb-2">Foods that Heal (<%= primary_dosha.name.titleize %>)</h3>
      <ul class="list-disc list-inside space-y-1 text-lg">
        <% primary_dosha.healing_foods.each do |food| %>
          <li><%= food.name %></li>
        <% end %>
      </ul>
    </div>

    <div class="w-full md:w-3/4 bg-base-100 border border-1 border-gray-300 rounded-2xl flex flex-col p-6">
      <h3 class="text-2xl font-bold mb-2">Foods that Aggravate (<%= primary_dosha.name.titleize %>)</h3>
      <ul class="list-disc list-inside space-y-1 text-lg">
        <% primary_dosha.aggravating_foods.each do |food| %>
          <li><%= food.name %></li>
        <% end %>
      </ul>
    </div>

    <div class="w-full md:w-3/4 bg-base-100 border border-1 border-gray-300 rounded-2xl flex flex-col p-6">
      <h3 class="text-2xl font-bold mb-2">Healing Herbs (<%= primary_dosha.name.titleize %>)</h3>
      <ul class="list-disc list-inside space-y-1 text-lg">
        <% primary_dosha.healing_herbs.each do |herb| %>
          <li><%= herb.name %></li>
        <% end %>
      </ul>
    </div>

    <div class="w-full md:w-3/4 bg-base-100 border border-1 border-gray-300 rounded-2xl flex flex-col p-6">
      <h3 class="text-2xl font-bold mb-2">General Recommendations (<%= primary_dosha.name.titleize %>)</h3>
      <% t("doshas.#{primary_dosha.name.downcase}.healing_plan.sections").each do |section| %>
        <h4 class="text-xl font-semibold mt-4 mb-2"><%= section[:name] %></h4>
        <ul class="list-disc list-inside space-y-1 text-lg">
          <% section[:items].each do |item| %>
            <li><%= item %></li>
          <% end %>
        </ul>
      <% end %>
    </div>

    <% if authenticated? %>
      <%= link_to "ðŸŒ¿ Healing Plan", my_healing_plan_path, class: "btn btn-accent font-semibold text-black text-lg w-full md:w-1/2" %>
      <%= link_to "ðŸ§­ Dashboard", dashboard_path, class: "btn btn-primary font-semibold text-white text-lg w-full md:w-1/2", data: { turbo: false } %>
    <% else %>
      <div class="text-lg">
        <strong>Sign Up to View Your Personalized Healing Plan</strong>
      </div>

      <button class="btn btn-primary font-semibold text-white text-lg w-1/2" data-action="click->modal#open">Sign Up</button>
    <% end %>
  </div>
</div>

<%= render 'shared/sign_up_modal' %>
