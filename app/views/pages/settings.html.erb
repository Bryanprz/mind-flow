<% content_for :title, @page_title %>
<% content_for :hide_footer, true %>

<div class="min-h-screen bg-gradient-to-br from-gray-900 via-slate-900 to-gray-900">
  <!-- Header -->
  <div class="bg-black/20 backdrop-blur-sm border-b border-white/10">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
      <div class="flex items-center justify-between">
        <div>
          <h1 class="text-3xl font-bold text-white flex items-center gap-3">
            <span class="text-4xl">‚öôÔ∏è</span>
            <%= @page_title %>
          </h1>
          <p class="text-gray-300 mt-2">Customize your MindFlow experience</p>
        </div>
        <button class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold transition-colors">
          Save Changes
        </button>
      </div>
    </div>
  </div>

  <!-- Main Content -->
  <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <!-- Profile Settings -->
    <div class="mb-8">
      <h2 class="text-2xl font-bold text-white mb-6 flex items-center gap-2">
        <span class="text-3xl">üë§</span>
        Profile Settings
      </h2>
      <div class="bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div>
            <label class="block text-white font-semibold mb-2">Name</label>
            <input type="text" value="<%= @settings_data[:profile][:name] %>" 
                   class="w-full bg-white/10 border border-white/20 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500">
          </div>
          <div>
            <label class="block text-white font-semibold mb-2">Email</label>
            <input type="email" value="<%= @settings_data[:profile][:email] %>" 
                   class="w-full bg-white/10 border border-white/20 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500">
          </div>
          <div>
            <label class="block text-white font-semibold mb-2">Timezone</label>
            <select class="w-full bg-white/10 border border-white/20 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-blue-500">
              <option value="UTC-8" <%= 'selected' if @settings_data[:profile][:timezone] == 'UTC-8' %>>Pacific Time (UTC-8)</option>
              <option value="UTC-5" <%= 'selected' if @settings_data[:profile][:timezone] == 'UTC-5' %>>Eastern Time (UTC-5)</option>
              <option value="UTC+0" <%= 'selected' if @settings_data[:profile][:timezone] == 'UTC+0' %>>GMT (UTC+0)</option>
              <option value="UTC+1" <%= 'selected' if @settings_data[:profile][:timezone] == 'UTC+1' %>>Central European Time (UTC+1)</option>
            </select>
          </div>
          <div>
            <label class="block text-white font-semibold mb-2">Language</label>
            <select class="w-full bg-white/10 border border-white/20 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-blue-500">
              <option value="en" <%= 'selected' if @settings_data[:profile][:language] == 'English' %>>English</option>
              <option value="es">Spanish</option>
              <option value="fr">French</option>
              <option value="de">German</option>
            </select>
          </div>
        </div>
        
        <div class="mt-6">
          <label class="block text-white font-semibold mb-2">Avatar</label>
          <div class="flex items-center gap-4">
            <div class="w-20 h-20 bg-blue-500 rounded-full flex items-center justify-center">
              <span class="text-white text-2xl font-bold">
                <%= @settings_data[:profile][:name]&.first || 'U' %>
              </span>
            </div>
            <button class="bg-blue-500/20 hover:bg-blue-500/30 text-blue-300 py-2 px-4 rounded-lg font-medium transition-colors">
              Change Avatar
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Preferences -->
    <div class="mb-8">
      <h2 class="text-2xl font-bold text-white mb-6 flex items-center gap-2">
        <span class="text-3xl">üé®</span>
        Preferences
      </h2>
      <div class="bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div>
            <label class="block text-white font-semibold mb-2">Theme</label>
            <select class="w-full bg-white/10 border border-white/20 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-blue-500">
              <option value="dark" <%= 'selected' if @settings_data[:preferences][:theme] == 'dark' %>>Dark Mode</option>
              <option value="light">Light Mode</option>
              <option value="auto">Auto</option>
            </select>
          </div>
          <div>
            <label class="block text-white font-semibold mb-2">Focus Sound</label>
            <select class="w-full bg-white/10 border border-white/20 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-blue-500">
              <option value="nature" <%= 'selected' if @settings_data[:preferences][:focus_sound] == 'nature' %>>Nature Sounds</option>
              <option value="rain">Rain</option>
              <option value="ocean">Ocean</option>
              <option value="silent">Silent</option>
            </select>
          </div>
          <div>
            <label class="block text-white font-semibold mb-2">Reminder Frequency</label>
            <select class="w-full bg-white/10 border border-white/20 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-blue-500">
              <option value="smart" <%= 'selected' if @settings_data[:preferences][:reminder_frequency] == 'smart' %>>Smart</option>
              <option value="frequent">Frequent</option>
              <option value="moderate">Moderate</option>
              <option value="minimal">Minimal</option>
            </select>
          </div>
          <div>
            <label class="block text-white font-semibold mb-2">Analytics Depth</label>
            <select class="w-full bg-white/10 border border-white/20 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-blue-500">
              <option value="detailed" <%= 'selected' if @settings_data[:preferences][:analytics_depth] == 'detailed' %>>Detailed</option>
              <option value="standard">Standard</option>
              <option value="basic">Basic</option>
            </select>
          </div>
        </div>
        
        <div class="mt-6">
          <label class="block text-white font-semibold mb-2">Data Sharing</label>
          <select class="w-full bg-white/10 border border-white/20 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-blue-500">
            <option value="minimal" <%= 'selected' if @settings_data[:preferences][:data_sharing] == 'minimal' %>>Minimal</option>
            <option value="standard">Standard</option>
            <option value="full">Full</option>
          </select>
          <p class="text-gray-400 text-sm mt-2">Controls how your data is used to improve the platform</p>
        </div>
      </div>
    </div>

    <!-- Privacy Settings -->
    <div class="mb-8">
      <h2 class="text-2xl font-bold text-white mb-6 flex items-center gap-2">
        <span class="text-3xl">üîí</span>
        Privacy & Security
      </h2>
      <div class="bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20">
        <div class="space-y-6">
          <div class="flex items-center justify-between">
            <div>
              <h3 class="text-white font-semibold">Anonymous Usage Data</h3>
              <p class="text-gray-400 text-sm">Help improve MindFlow with anonymous analytics</p>
            </div>
            <label class="relative inline-flex items-center cursor-pointer">
              <input type="checkbox" class="sr-only peer" <%= 'checked' if @settings_data[:privacy][:anonymous_usage] %>>
              <div class="w-11 h-6 bg-gray-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-500"></div>
            </label>
          </div>
          
          <div class="flex items-center justify-between">
            <div>
              <h3 class="text-white font-semibold">Share Analytics</h3>
              <p class="text-gray-400 text-sm">Allow sharing of your performance data for research</p>
            </div>
            <label class="relative inline-flex items-center cursor-pointer">
              <input type="checkbox" class="sr-only peer" <%= 'checked' if @settings_data[:privacy][:sharing_analytics] %>>
              <div class="w-11 h-6 bg-gray-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-500"></div>
            </label>
          </div>
          
          <div class="flex items-center justify-between">
            <div>
              <h3 class="text-white font-semibold">Export Data</h3>
              <p class="text-gray-400 text-sm">Allow exporting your personal data</p>
            </div>
            <label class="relative inline-flex items-center cursor-pointer">
              <input type="checkbox" class="sr-only peer" <%= 'checked' if @settings_data[:privacy][:export_data] %>>
              <div class="w-11 h-6 bg-gray-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-500"></div>
            </label>
          </div>
          
          <div class="flex items-center justify-between">
            <div>
              <h3 class="text-white font-semibold">Delete Account</h3>
              <p class="text-gray-400 text-sm">Permanently delete your account and all data</p>
            </div>
            <label class="relative inline-flex items-center cursor-pointer">
              <input type="checkbox" class="sr-only peer" <%= 'checked' if @settings_data[:privacy][:delete_account] %>>
              <div class="w-11 h-6 bg-gray-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-red-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-red-500"></div>
            </label>
          </div>
        </div>
        
        <div class="mt-6 pt-6 border-t border-white/20">
          <div class="flex items-center justify-between">
            <div>
              <h3 class="text-white font-semibold">Data Retention</h3>
              <p class="text-gray-400 text-sm">How long to keep your personal data</p>
            </div>
            <select class="bg-white/10 border border-white/20 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500">
              <option value="1 year" <%= 'selected' if @settings_data[:privacy][:data_retention] == '1 year' %>>1 Year</option>
              <option value="2 years">2 Years</option>
              <option value="5 years">5 Years</option>
              <option value="indefinite">Indefinite</option>
            </select>
          </div>
        </div>
      </div>
    </div>

    <!-- Danger Zone -->
    <div class="bg-red-500/10 backdrop-blur-sm rounded-xl p-6 border border-red-500/20">
      <h2 class="text-2xl font-bold text-red-400 mb-6 flex items-center gap-2">
        <span class="text-3xl">‚ö†Ô∏è</span>
        Danger Zone
      </h2>
      <div class="space-y-4">
        <div class="flex items-center justify-between">
          <div>
            <h3 class="text-red-400 font-semibold">Reset All Data</h3>
            <p class="text-red-300 text-sm">Clear all your progress and start fresh</p>
          </div>
          <button class="bg-red-500/20 hover:bg-red-500/30 text-red-300 py-2 px-4 rounded-lg font-medium transition-colors">
            Reset Data
          </button>
        </div>
        
        <div class="flex items-center justify-between">
          <div>
            <h3 class="text-red-400 font-semibold">Delete Account</h3>
            <p class="text-red-300 text-sm">Permanently delete your account and all associated data</p>
          </div>
          <button class="bg-red-500 hover:bg-red-600 text-white py-2 px-4 rounded-lg font-medium transition-colors">
            Delete Account
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
