<turbo-frame id="main_content_area">
  <div class="quiz-results-container flex flex-col items-center justify-center min-h-[calc(100vh-10rem)] px-4 py-8">
    <div class="w-full max-w-2xl bg-white p-8 rounded-lg shadow-lg border border-amber-100 text-center">
      <h2 class="text-3xl font-bold text-gray-800 mb-6">Your Ayurvedic Profile</h2>

      <% if quiz_submission.results.present? && quiz_submission.results["dosha_type"].present? %>
        <p class="text-xl text-gray-700 mb-4">You are primarily a <span class="font-semibold text-amber-600"><%= quiz_submission.results["dosha_type"] %></span> type.</p>

        <% if quiz_submission.results["recommendations"].present? %>
          <h3 class="text-2xl font-semibold text-gray-800 mt-8 mb-4">Personalized Recommendations:</h3>
          <ul class="list-disc list-inside text-left mx-auto max-w-md text-gray-700">
            <% quiz_submission.results["recommendations"].each do |rec| %>
              <li><%= rec %></li>
            <% end %>
          </ul>
        <% end %>
      <% else %>
        <p class="text-xl text-gray-700 mb-4">Results are being calculated. Please check back soon!</p>
      <% end %>

      <div class="mt-10">
        <h3 class="text-2xl font-semibold text-gray-800 mb-4">Save Your Results!</h3>
        <p class="text-gray-600 mb-6">Enter your details to save your personalized Ayurvedic profile and access more features.</p>

        <%= form_with url: create_user_from_quiz_path, method: :post, class: "max-w-md mx-auto" do |form| %>
          <%= form.hidden_field :quiz_submission_id, value: quiz_submission.id %>

          <div class="mb-4">
            <%= form.label :email, class: "block text-gray-700 text-sm font-bold mb-2" %>
            <%= form.email_field :email, class: "shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline", required: true %>
          </div>

          <div class="mb-4">
            <%= form.label :first_name, class: "block text-gray-700 text-sm font-bold mb-2" %>
            <%= form.text_field :first_name, class: "shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" %>
          </div>

          <div class="mb-6">
            <%= form.label :last_name, class: "block text-gray-700 text-sm font-bold mb-2" %>
            <%= form.text_field :last_name, class: "shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" %>
          </div>

          <div class="mb-6">
            <%= form.label :password, class: "block text-gray-700 text-sm font-bold mb-2" %>
            <%= form.password_field :password, class: "shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline", required: true %>
          </div>

          <div class="flex items-center justify-between">
            <%= form.submit "Create Account & Save Results", class: "bg-amber-600 hover:bg-amber-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline cursor-pointer" %>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</turbo-frame>