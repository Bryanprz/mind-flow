<% content_for :main_container_class, 'min-h-screen bg-base-200' %>

<div class="max-w-4xl mx-auto h-screen flex flex-col">
  <!-- Room Header -->
  <div class="bg-white border-b p-4 flex justify-between items-center">
    <div>
      <h1 class="text-xl font-semibold"><%= @room.name %></h1>
      <p class="text-sm text-gray-600">
        <%= pluralize(@room.users.count, 'member') %>
        <% if @room.room_type == 'private' %>
          • Private conversation
        <% end %>
      </p>
    </div>
    <%= link_to "← Back to Rooms", rooms_path, 
        class: "btn btn-sm btn-outline" %>
  </div>
  
  <!-- Messages Container -->
  <div id="messages" 
       class="flex-1 overflow-y-auto p-4 space-y-4"
       data-controller="scroll-to room-channel"
       data-room-channel-room-id-value="<%= @room.id %>"
       data-turbo-stream="room_<%= @room.id %>"
       data-action="turbo:stream-render->scroll-to#scrollToBottom">
    <%= render @messages %>
  </div>
  
  
  <!-- Message Form -->
  <div class="bg-white border-t p-4">
    <div id="message_form">
      <%= render "messages/form", message: @message, room: @room %>
    </div>
  </div>
</div>
