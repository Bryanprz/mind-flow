<div>
  <div class="flex justify-between items-center mb-4">
    <h3 class="text-lg font-medium">Create Post</h3>
    <button type="button" class="btn btn-ghost btn-sm" data-action="click->post-form#toggle">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
      </svg>
    </button>
  </div>
  
  <%= form_with model: SocialPost.new, 
                url: social_posts_path, 
                class: "border border-gray-300 card bg-base-100 p-4", 
                data: { 
                  turbo: true,
                  post_form_target: "form",
                  action: "turbo:submit-end->post-form#handleSubmit",
                  controller: "image-preview"
                }, 
                multipart: true do |form| %>
  <div class="form-control">
    <%= form.label :content, class: "label" %>
    <%= form.rich_text_area :content, class: "textarea textarea-bordered min-h-24", placeholder: "What's on your mind?" %>
  </div>

  <!-- Media Upload Section -->
  <div class="form-control mt-4">
    <div class="flex items-center gap-4">
      <%= form.label :media, class: "cursor-pointer text-gray-500 hover:text-primary transition-colors flex items-center gap-2" do %>
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z" clip-rule="evenodd" />
        </svg>
        <span class="text-sm">Add Media</span>
        <%= form.file_field :media, multiple: true, class: "hidden", data: { image_preview_target: "fileInput" } %>
      <% end %>
      
      <div class="text-xs text-gray-400">
        Drag and drop images here or click to upload
      </div>
    </div>
    
    <!-- Image Preview Area -->
    <div class="mt-3 hidden" data-image-preview-target="previewContainer">
      <div class="grid grid-cols-2 gap-2" data-image-preview-target="previewGrid">
        <!-- Preview images will be inserted here -->
      </div>
    </div>
  </div>

  <div class="form-control mt-6">
    <%= form.submit "Post", class: "btn btn-primary text-white", data: { action: "click->post-form#submit" } %>
  </div>
<% end %>
</div>
