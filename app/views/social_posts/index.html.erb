<% if turbo_frame_request? %>
  <%= turbo_frame_tag "social_feed" do %>
    <%# Lightweight feed for Turbo Frame embedding (e.g., dashboard card) %>
    <% if @social_posts.any? %>
      <% @social_posts.each_with_index do |post, index| %>
        <%= render post %>
        <% unless index == @social_posts.length - 1 %>
          <div class="border-t border-gray-200 my-0.5"></div>
        <% end %>
      <% end %>
    <% else %>
      <p class="p-4 text-center text-gray-500">No posts yet. Be the first to share!</p>
    <% end %>
  <% end %>
<% else %>
  <% content_for :main_container_class, 'w-full h-full flex justify-center items-stretch bg-base-200 p-8 social-posts-page' %>
  <% content_for :hide_footer, true %>

  <div class="container mx-auto max-w-lg" data-controller="post-form">
    <div data-post-form-target="collapsed" class="hidden">
      <div class="card bg-base-100 shadow-xl cursor-pointer">
        <div class="card-body p-4">
          <input type="text" placeholder="What's happening?" class="input input-bordered w-full h-10" disabled>
        </div>
      </div>
    </div>

    <div id="post-form-container" class="mb-4" data-post-form-target="expanded">
      <%= render "social_posts/form" %>
    </div>

    <div id="social-posts" class="space-y-4 mt-4">
      <% if @social_posts.any? %>
        <%= render @social_posts %>
      <% else %>
        <p class="text-center text-gray-500">No posts yet. Be the first to share!</p>
      <% end %>
    </div>
  </div>
<% end %>